<Window x:Class="MyWeChat.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="微信" Height="300" Width="400"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        Loaded="MainWindow_Loaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 主内容区 -->
        <Grid Grid.Row="0" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- 账号信息显示区域 -->
            <Border Grid.Row="0" Background="White" Padding="15" CornerRadius="5" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal">
                    <Image Name="AccountAvatarImage" 
                           Width="60" Height="60" 
                           Margin="0,0,15,0"
                           Stretch="UniformToFill"
                           VerticalAlignment="Center">
                        <Image.Source>
                            <BitmapImage UriSource="pack://application:,,,/Resources/favicon.ico"/>
                        </Image.Source>
                    </Image>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Name="AccountNickNameText" 
                                   Text="等待获取账号信息..." 
                                   FontSize="16" 
                                   FontWeight="Bold"
                                   Margin="0,0,0,5"/>
                        <TextBlock Name="AccountWeChatIdText" 
                                   Text="" 
                                   FontSize="12" 
                                   Foreground="#666666"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- 右侧内容区 -->
            <Grid Grid.Row="1">
            </Grid>
        </Grid>
        
        <!-- 窗口底部：图标和名称（透明度20%） -->
        <Border Grid.Row="1" 
                Background="Transparent" 
                Padding="10,5" 
                HorizontalAlignment="Center"
                Opacity="0.2">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center">
                <Image Width="16" Height="16" 
                       Margin="0,0,5,0"
                       Stretch="Uniform">
                    <Image.Source>
                        <BitmapImage UriSource="pack://application:,,,/Resources/favicon.ico"/>
                    </Image.Source>
                </Image>
                <TextBlock Text="微信" 
                           FontSize="12" 
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>
        
        <!-- 关闭进度遮罩层 - 使用Canvas确保在最上层 -->
        <Canvas 
                Name="ClosingOverlayCanvas"
                Visibility="Collapsed"
                Background="#80000000"
                Panel.ZIndex="9999">
            <Border Name="ClosingOverlayBorder"
                    Background="White" 
                    CornerRadius="10" 
                    Padding="30" 
                    Width="400" 
                    Height="280"
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="正在关闭程序..." 
                               FontSize="18" 
                               FontWeight="Bold" 
                               Margin="0,0,0,25"
                               HorizontalAlignment="Center"/>
                    
                    <!-- 圆环进度 -->
                    <Grid Width="120" Height="120" Margin="0,0,0,20" HorizontalAlignment="Center">
                        <!-- 背景圆环 -->
                        <Ellipse Width="120" Height="120" 
                                 Stroke="#E0E0E0" 
                                 StrokeThickness="8"/>
                        <!-- 进度圆环 -->
                        <Path Name="ClosingProgressPath" 
                              Stroke="#07C160" 
                              StrokeThickness="8"
                              StrokeStartLineCap="Round"
                              StrokeEndLineCap="Round">
                            <Path.Data>
                                <PathGeometry>
                                    <PathFigure StartPoint="60,10">
                                        <ArcSegment x:Name="ClosingProgressArc"
                                                    Size="50,50"
                                                    SweepDirection="Clockwise"
                                                    IsLargeArc="False"/>
                                    </PathFigure>
                                </PathGeometry>
                            </Path.Data>
                        </Path>
                        <!-- 进度文本 -->
                        <TextBlock Name="ClosingProgressText" 
                                   Text="0%" 
                                   FontSize="20" 
                                   FontWeight="Bold"
                                   Foreground="#07C160"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Grid>
                    
                    <TextBlock Name="ClosingStatusText" 
                               Text="准备关闭..." 
                               FontSize="14" 
                               Foreground="#666666"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"
                               TextAlignment="Center"
                               MaxWidth="340"
                               Margin="0,0,0,10"/>
                </StackPanel>
            </Border>
        </Canvas>
    </Grid>
</Window>

