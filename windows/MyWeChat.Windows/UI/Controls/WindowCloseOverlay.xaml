<UserControl x:Class="MyWeChat.Windows.UI.Controls.WindowCloseOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch">
    <Grid Name="OverlayCanvas"
          Visibility="Collapsed"
          Panel.ZIndex="9999"
          IsHitTestVisible="False"
          IsEnabled="False"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
        <!-- 半透明背景层 -->
        <Border Background="#80000000"/>
        
        <!-- 毛玻璃效果层（模糊背景） -->
        <Border Background="#40FFFFFF">
            <Border.Effect>
                <BlurEffect Radius="20"/>
            </Border.Effect>
        </Border>
        
        <!-- 关闭确认弹窗 - 使用Grid自动居中 -->
        <Border Name="ConfirmDialogBorder"
                Background="#F0FFFFFF"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="#E5E5E5"
                Width="360"
                Height="200"
                Margin="20"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- 标题栏 -->
                <Border Grid.Row="0" 
                        Background="#F7F7F7" 
                        CornerRadius="10,10,0,0"
                        Height="50">
                    <TextBlock Text="请确认关闭选择" 
                               FontSize="16" 
                               FontWeight="SemiBold"
                               Foreground="#333333"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"/>
                </Border>
                
                <!-- 内容区域 - 提示文字已移除，按钮已说明功能 -->
                <StackPanel Grid.Row="1" 
                            Margin="20,20,20,10"
                            VerticalAlignment="Center">
                    <!-- 提示文字已移除 -->
                </StackPanel>
                
                <!-- 按钮区域 -->
                <Border Grid.Row="2" 
                        Background="#F7F7F7" 
                        CornerRadius="0,0,10,10"
                        BorderThickness="0,1,0,0"
                        BorderBrush="#E5E5E5">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- 最小化到托盘按钮 -->
                        <Button Grid.Column="0" 
                                Name="MinimizeButton"
                                Content="最小化到托盘" 
                                FontSize="14"
                                Height="44"
                                Background="Transparent"
                                Foreground="#07C160"
                                BorderThickness="0"
                                Click="MinimizeButton_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                        CornerRadius="0,0,0,10">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                      VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#F0F0F0"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <!-- 分隔线1 -->
                        <Border Grid.Column="1" Background="#E5E5E5"/>
                        
                        <!-- 关闭程序按钮 -->
                        <Button Grid.Column="2" 
                                Name="CloseButton"
                                Content="关闭程序" 
                                FontSize="14"
                                Height="44"
                                Background="Transparent"
                                Foreground="#333333"
                                BorderThickness="0"
                                Click="CloseButton_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                      VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#F0F0F0"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <!-- 分隔线2 -->
                        <Border Grid.Column="3" Background="#E5E5E5"/>
                        
                        <!-- 取消按钮 -->
                        <Button Grid.Column="4" 
                                Name="CancelButton"
                                Content="取消" 
                                FontSize="14"
                                Height="44"
                                Background="Transparent"
                                Foreground="#666666"
                                BorderThickness="0"
                                Click="CancelButton_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                        CornerRadius="0,0,10,0">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                      VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#F0F0F0"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>
                </Border>
            </Grid>
        </Border>
        
        <!-- 关闭进度圆环 - 使用Grid自动居中 -->
        <Border Name="ProgressBorder"
                Background="#F0FFFFFF"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="#E5E5E5"
                Width="360"
                Height="280"
                Margin="20"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="正在关闭程序..." 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Margin="0,0,0,25"
                           HorizontalAlignment="Center"/>
                
                <!-- 圆环进度 -->
                <Grid Width="120" Height="120" Margin="0,0,0,20" HorizontalAlignment="Center">
                    <!-- 背景圆环 -->
                    <Ellipse Width="120" Height="120" 
                             Stroke="#E0E0E0" 
                             StrokeThickness="8"/>
                    <!-- 进度圆环 -->
                    <Path Name="ProgressPath" 
                          Stroke="#07C160" 
                          StrokeThickness="8"
                          StrokeStartLineCap="Round"
                          StrokeEndLineCap="Round">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure StartPoint="60,10">
                                    <ArcSegment x:Name="ProgressArc"
                                                Size="50,50"
                                                SweepDirection="Clockwise"
                                                IsLargeArc="False"/>
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                    </Path>
                    <!-- 进度文本 -->
                    <TextBlock Name="ProgressText" 
                               Text="0%" 
                               FontSize="20" 
                               FontWeight="Bold"
                               Foreground="#07C160"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Grid>
                
                <TextBlock Name="StatusText" 
                           Text="准备关闭..." 
                           FontSize="14" 
                           Foreground="#666666"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           MaxWidth="340"
                           Margin="0,0,0,10"/>
            </StackPanel>
        </Border>
        
        <!-- 启动进度圆环 - 使用Grid自动居中 -->
        <Border Name="StartupProgressBorder"
                Background="#F0FFFFFF"
                CornerRadius="10"
                BorderThickness="1"
                BorderBrush="#E5E5E5"
                Width="360"
                Height="280"
                Margin="20"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="正在启动..." 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Margin="0,0,0,25"
                           HorizontalAlignment="Center"/>
                
                <!-- 圆环进度 -->
                <Grid Width="120" Height="120" Margin="0,0,0,20" HorizontalAlignment="Center">
                    <!-- 背景圆环 -->
                    <Ellipse Width="120" Height="120" 
                             Stroke="#E0E0E0" 
                             StrokeThickness="8"/>
                    <!-- 进度圆环 -->
                    <Path Name="StartupProgressPath" 
                          Stroke="#07C160" 
                          StrokeThickness="8"
                          StrokeStartLineCap="Round"
                          StrokeEndLineCap="Round">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure StartPoint="60,10">
                                    <ArcSegment x:Name="StartupProgressArc"
                                                Size="50,50"
                                                SweepDirection="Clockwise"
                                                IsLargeArc="False"/>
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                    </Path>
                    <!-- 进度文本 -->
                    <TextBlock Name="StartupProgressText" 
                               Text="0%" 
                               FontSize="20" 
                               FontWeight="Bold"
                               Foreground="#07C160"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Grid>
                
                <TextBlock Name="StartupStatusText" 
                           Text="准备启动..." 
                           FontSize="14" 
                           Foreground="#666666"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           MaxWidth="340"
                           Margin="0,0,0,10"/>
                
                <!-- 步骤信息 -->
                <TextBlock Name="StartupStepText" 
                           Text="步骤 0/15" 
                           FontSize="12" 
                           Foreground="#999999"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>

