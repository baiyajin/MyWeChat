<Window x:Class="MyWeChat.Windows.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="登录" Height="500" Width="400"
        WindowStartupLocation="CenterScreen"
        Background="White"
        ResizeMode="NoResize">
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Logo和标题 -->
        <StackPanel Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,40">
            <Image Width="80" Height="80" 
                   Margin="0,0,0,20"
                   Stretch="Uniform">
                <Image.Source>
                    <BitmapImage UriSource="pack://application:,,,/Resources/favicon.ico"/>
                </Image.Source>
            </Image>
            <TextBlock Text="MyWeChat" 
                       FontSize="32" 
                       FontWeight="Bold"
                       Foreground="#07C160"
                       HorizontalAlignment="Center"/>
        </StackPanel>
        
        <!-- 登录表单 -->
        <StackPanel Grid.Row="1" VerticalAlignment="Top">
            <!-- 手机号输入 -->
            <TextBlock Text="手机号" 
                       FontSize="14" 
                       Margin="0,0,0,8"
                       Foreground="#333333"/>
            <TextBox Name="PhoneTextBox" 
                     FontSize="16" 
                     Padding="12,10"
                     Margin="0,0,0,20"
                     BorderBrush="#CCCCCC"
                     BorderThickness="1"
                     GotFocus="PhoneTextBox_GotFocus"
                     LostFocus="PhoneTextBox_LostFocus"/>
            
            <!-- 验证码输入 -->
            <Grid Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="验证码" 
                               FontSize="14" 
                               Margin="0,0,0,8"
                               Foreground="#333333"/>
                    <TextBox Name="CodeTextBox" 
                             FontSize="16" 
                             Padding="12,10"
                             BorderBrush="#CCCCCC"
                             BorderThickness="1"
                             GotFocus="CodeTextBox_GotFocus"
                             LostFocus="CodeTextBox_LostFocus"/>
                </StackPanel>
                <Button Name="GetCodeButton" 
                        Grid.Column="1"
                        Content="获取验证码" 
                        Padding="15,10"
                        Margin="0,25,0,0"
                        Background="#07C160"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="GetCodeButton_Click"
                        IsEnabled="True"/>
            </Grid>
            
            <!-- 错误提示 -->
            <TextBlock Name="ErrorTextBlock" 
                       Text="" 
                       FontSize="12" 
                       Foreground="Red"
                       Margin="0,0,0,20"
                       TextWrapping="Wrap"
                       Visibility="Collapsed"/>
            
            <!-- 登录按钮 -->
            <Button Name="LoginButton" 
                    Content="登录" 
                    FontSize="16" 
                    Padding="0,12"
                    Background="#07C160"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand"
                    Click="LoginButton_Click"
                    IsEnabled="True"/>
            
            <!-- 登录历史 -->
            <TextBlock Text="登录历史" 
                       FontSize="14" 
                       Margin="0,30,0,10"
                       Foreground="#666666"/>
            <ScrollViewer MaxHeight="150" 
                          VerticalScrollBarVisibility="Auto">
                <ItemsControl Name="HistoryItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#F5F5F5" 
                                    Padding="12" 
                                    Margin="0,0,0,8" 
                                    CornerRadius="5"
                                    Cursor="Hand"
                                    MouseLeftButtonUp="HistoryItem_MouseLeftButtonUp"
                                    Tag="{Binding}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Image Grid.Column="0" 
                                           Width="40" Height="40" 
                                           Margin="0,0,12,0"
                                           Stretch="UniformToFill">
                                        <Image.Source>
                                            <BitmapImage UriSource="{Binding Avatar, TargetNullValue=pack://application:,,,/Resources/favicon.ico}"/>
                                        </Image.Source>
                                    </Image>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Nickname}" 
                                                   FontSize="14" 
                                                   FontWeight="SemiBold"
                                                   Foreground="#333333"/>
                                        <TextBlock Text="{Binding Phone}" 
                                                   FontSize="12" 
                                                   Foreground="#999999"
                                                   Margin="0,4,0,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Column="2" 
                                               Text="→" 
                                               FontSize="16" 
                                               Foreground="#CCCCCC"
                                               VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </StackPanel>
    </Grid>
</Window>

